'use strict';
<<<<<<< HEAD
var uncurryThis = require('../internals/function-uncurry-this');
=======
>>>>>>> e0fc3b07e (initial commit)
var aCallable = require('../internals/a-callable');
var isNullOrUndefined = require('../internals/is-null-or-undefined');
var lengthOfArrayLike = require('../internals/length-of-array-like');
var toObject = require('../internals/to-object');
<<<<<<< HEAD
=======
var createProperty = require('../internals/create-property');
>>>>>>> e0fc3b07e (initial commit)
var MapHelpers = require('../internals/map-helpers');
var iterate = require('../internals/map-iterate');

var Map = MapHelpers.Map;
var mapHas = MapHelpers.has;
var mapSet = MapHelpers.set;
<<<<<<< HEAD
var push = uncurryThis([].push);
=======
>>>>>>> e0fc3b07e (initial commit)

// `Array.prototype.uniqueBy` method
// https://github.com/tc39/proposal-array-unique
module.exports = function uniqueBy(resolver) {
  var that = toObject(this);
  var length = lengthOfArrayLike(that);
  var result = [];
  var map = new Map();
  var resolverFunction = !isNullOrUndefined(resolver) ? aCallable(resolver) : function (value) {
    return value;
  };
  var index, item, key;
  for (index = 0; index < length; index++) {
    item = that[index];
    key = resolverFunction(item);
    if (!mapHas(map, key)) mapSet(map, key, item);
  }
<<<<<<< HEAD
  iterate(map, function (value) {
    push(result, value);
=======
  index = 0;
  iterate(map, function (value) {
    createProperty(result, index++, value);
>>>>>>> e0fc3b07e (initial commit)
  });
  return result;
};
